import { Injectable } from '@nestjs/common';
import { InjectModel } from '@nestjs/mongoose';
import { Model } from 'mongoose';
import { HttpService } from '@nestjs/axios';
import { Cron, CronExpression } from '@nestjs/schedule';
import { CreatePredictionDto } from './dto/create-prediction.dto';
import { UpdatePredictionDto } from './dto/update-prediction.dto';
import { Prediction } from './entities/prediction.entity';
import { User } from '../auth/entities/user.entity';
import { Quiniela } from '../quiniela/entities/quiniela.entity';
import { Player } from '../player/entities/player.entity';
import * as moment from 'moment';
import 'moment-timezone';

// import { GetUser } from 'src/decorators/get-user.decorator';
//termina fase de grupos a las 11 am y debo saber despues de cada fase a cuanto tiempo se actualiza la api
//1670001000 a la 1 pm del mismo dia

//1670079600 hora del primer partido de octavos
//1670353200 hora del ultimo partido de octavos

//1670598000 hora del primer partido de cuartos
//1670698800 hora del ultimo partido de cuartos

//1670958000 hora del primer partido de semifinales
//1671044400 hora del ultimo partido de semifinales

//1671289200 hora del primer partido de final
//1671375600 hora del ultimo partido de final

@Injectable()
export class PredictionService {
  constructor(
    @InjectModel(Prediction.name)
    private readonly predictionModel: Model<Prediction>,
    private readonly httpService: HttpService,
    @InjectModel(User.name)
    private readonly userModel: Model<User>,
    @InjectModel(Quiniela.name)
    private readonly quinielaModel: Model<Quiniela>,
    @InjectModel(Player.name)
    private readonly playerModel: Model<Player>,
  ) {}

  async create(createPredictionDto: CreatePredictionDto, user: User) {
    try {
      const newPrediction = await this.predictionModel.create({
        ...createPredictionDto,
        userId: user._id.toString(),
      });
      return newPrediction;
    } catch (error) {
      console.log(error);
    }
  }

  @Cron(CronExpression.EVERY_10_HOURS) // cambiar a EVERY_DAY_AT_MIDNIGHT
  async handleCron() {
    // const matches = [
    //   {
    //     matchId: '2270583212125',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1668959940,
    //     status: 10,
    //     homeId: '904',
    //     homeName: 'Qatar',
    //     awayId: '779',
    //     awayName: 'Ecuador',
    //     homeScore: 4,
    //     awayScore: 6,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     location: 'Khalifa International',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '11235267058129',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669035600,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '744',
    //     homeName: 'England',
    //     awayId: '783',
    //     awayName: 'Iran',
    //     homeScore: 1,
    //     awayScore: 0,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '771221237058126',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669046340,
    //     status: 10,
    //     homeId: '815',
    //     homeName: 'Senegal',
    //     awayId: '646',
    //     awayName: 'Netherlands',
    //     homeScore: 3,
    //     awayScore: 2,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '341232193358121',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669057200,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '797',
    //     homeName: 'USA',
    //     awayId: '7384',
    //     awayName: 'Wales',
    //     homeScore: 0,
    //     awayScore: 2,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '22705812339875',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1668959940,
    //     status: 10,
    //     homeId: '904',
    //     homeName: 'Qatar',
    //     awayId: '779',
    //     awayName: 'Ecuador',
    //     homeScore: 2,
    //     awayScore: 2,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     location: 'Khalifa International',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '267058108765429',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669035600,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '744',
    //     homeName: 'England',
    //     awayId: '783',
    //     awayName: 'Iran',
    //     homeScore: 2,
    //     awayScore: 5,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '23705678958126',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669046340,
    //     status: 10,
    //     homeId: '815',
    //     homeName: 'Senegal',
    //     awayId: '646',
    //     awayName: 'Netherlands',
    //     homeScore: 3,
    //     awayScore: 4,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '39541335812144',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669057200,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '797',
    //     homeName: 'USA',
    //     awayId: '7384',
    //     awayName: 'Wales',
    //     homeScore: 5,
    //     awayScore: 2,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },

    //   {
    //     matchId: '2273312321058125',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1668959940,
    //     status: 10,
    //     homeId: '904',
    //     homeName: 'Qatar',
    //     awayId: '779',
    //     awayName: 'Ecuador',
    //     homeScore: 3,
    //     awayScore: 4,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     location: 'Khalifa International',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '267058789863129',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669035600,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '744',
    //     homeName: 'England',
    //     awayId: '783',
    //     awayName: 'Iran',
    //     homeScore: 0,
    //     awayScore: 0,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '23703458125546',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1969046340,
    //     status: 10,
    //     homeId: '815',
    //     homeName: 'Senegal',
    //     awayId: '646',
    //     awayName: 'Netherlands',
    //     homeScore: 3,
    //     awayScore: 3,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '3933586775433121',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1669057200,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '797',
    //     homeName: 'USA',
    //     awayId: '7384',
    //     awayName: 'Wales',
    //     homeScore: 4,
    //     awayScore: 1,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },

    //   {
    //     matchId: '22707600358125',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1668959940,
    //     status: 10,
    //     homeId: '904',
    //     homeName: 'Qatar',
    //     awayId: '779',
    //     awayName: 'Ecuador',
    //     homeScore: 5,
    //     awayScore: 5,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     location: 'Khalifa International',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '267058122987429',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1840007600,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '744',
    //     homeName: 'England',
    //     awayId: '783',
    //     awayName: 'Iran',
    //     homeScore: 3,
    //     awayScore: 2,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },

    //   {
    //     matchId: '227058155573225',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1780007600,
    //     status: 10,
    //     homeId: '904',
    //     homeName: 'Qatar',
    //     awayId: '779',
    //     awayName: 'Ecuador',
    //     homeScore: 8,
    //     awayScore: 8,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'A',
    //     location: 'Khalifa International',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 0,
    //       awayScore: 0,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 0,
    //       extraAwayScore: 0,
    //       penHomeScore: 0,
    //       penAwayScore: 0,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 0,
    //     },
    //   },
    //   {
    //     matchId: '26705812955986332',
    //     leagueId: '1572',
    //     leagueName: 'FIFA World Cup',
    //     leagueShortName: 'World Cup',
    //     matchTime: 1770007600,
    //     halfStartTime: 0,
    //     status: 10,
    //     homeId: '744',
    //     homeName: 'England',
    //     awayId: '783',
    //     awayName: 'Iran',
    //     homeScore: 2,
    //     awayScore: 2,
    //     homeHalfScore: 0,
    //     awayHalfScore: 0,
    //     homeRed: 0,
    //     awayRed: 0,
    //     homeYellow: 0,
    //     awayYellow: 0,
    //     homeCorner: 0,
    //     awayCorner: 0,
    //     homeRank: '',
    //     awayRank: '',
    //     season: '2022',
    //     stageId: '21534',
    //     round: 'Groups',
    //     group: 'B',
    //     extraExplain: {
    //       kickOff: 0,
    //       minute: 0,
    //       homeScore: 2,
    //       awayScore: 2,
    //       extraTimeStatus: 0,
    //       extraHomeScore: 1,
    //       extraAwayScore: 1,
    //       penHomeScore: 2,
    //       penAwayScore: 4,
    //       twoRoundsHomeScore: 0,
    //       twoRoundsAwayScore: 0,
    //       winner: 2,
    //     },
    //   },
    // ]; // eliminar

    // console.log(timeNow);

    let matches = [];
    let players = [];

    await this.httpService.axiosRef
      .get(
        'http://api.isportsapi.com/sport/football/schedule?api_key=nqt7nbnv0VyRFjJf&leagueId=13014',
      )
      .then((res) => (matches = res.data.data)); //cambiar leagueId a 1572

    console.log('');

    // const players = [
    //   {
    //     playerId: '150860',
    //     playerName: 'Erling Haaland',
    //     teamId: '26',
    //     teamName: 'Manchester City',
    //     country: 'Norway',
    //     goalsCount: 5,
    //     homeGoals: 3,
    //     awayGoals: 2,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '120561',
    //     playerName: 'Leroy Sane',
    //     teamId: '88',
    //     teamName: 'Bayern Munchen',
    //     country: 'Germany',
    //     goalsCount: 4,
    //     homeGoals: 3,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '168137',
    //     playerName: 'Giacomo Raspadori',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Italy',
    //     goalsCount: 3,
    //     homeGoals: 0,
    //     awayGoals: 3,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '103092',
    //     playerName: 'Piotr Zielinski',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Poland',
    //     goalsCount: 3,
    //     homeGoals: 2,
    //     awayGoals: 1,
    //     homePenalty: 1,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '171424',
    //     playerName: 'Mohammed Kudus',
    //     teamId: '253',
    //     teamName: 'AFC Ajax',
    //     country: 'Ghana',
    //     goalsCount: 3,
    //     homeGoals: 2,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '178042',
    //     playerName: 'Jude Bellingham',
    //     teamId: '99',
    //     teamName: 'Borussia Dortmund',
    //     country: 'England',
    //     goalsCount: 3,
    //     homeGoals: 1,
    //     awayGoals: 2,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '165972',
    //     playerName: 'Noah Okafor',
    //     teamId: '9',
    //     teamName: 'Red Bull Salzburg',
    //     country: 'Switzerland',
    //     goalsCount: 3,
    //     homeGoals: 2,
    //     awayGoals: 1,
    //     homePenalty: 1,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '60961',
    //     playerName: 'Robert Lewandowski',
    //     teamId: '84',
    //     teamName: 'FC Barcelona',
    //     country: 'Poland',
    //     goalsCount: 3,
    //     homeGoals: 3,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '144812',
    //     playerName: 'Kylian Mbappe Lottin',
    //     teamId: '271',
    //     teamName: 'Paris Saint Germain (PSG)',
    //     country: 'France',
    //     goalsCount: 3,
    //     homeGoals: 2,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '196127',
    //     playerName: 'Ferran Jutgla Blanch',
    //     teamId: '148',
    //     teamName: 'Club Brugge',
    //     country: 'Spain',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 1,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '198068',
    //     playerName: 'Mykhailo Mudryk',
    //     teamId: '716',
    //     teamName: 'FC Shakhtar Donetsk',
    //     country: 'Ukraine',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '153244',
    //     playerName: 'Vinicius Jose Paixao de Oliveira Junior',
    //     teamId: '82',
    //     teamName: 'Real Madrid',
    //     country: 'Brazil',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '24067',
    //     playerName: 'Lionel Andres Messi',
    //     teamId: '271',
    //     teamName: 'Paris Saint Germain (PSG)',
    //     country: 'Argentina',
    //     goalsCount: 2,
    //     homeGoals: 0,
    //     awayGoals: 2,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '115999',
    //     playerName: 'Giovanni Pablo Simeone',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Argentina',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '164379',
    //     playerName: 'Alexis Saelemaekers',
    //     teamId: '150',
    //     teamName: 'AC Milan',
    //     country: 'Belgium',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '101663',
    //     playerName: 'Adrien Rabiot',
    //     teamId: '166',
    //     teamName: 'Juventus',
    //     country: 'France',
    //     goalsCount: 2,
    //     homeGoals: 2,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '118207',
    //     playerName: 'Andre Silva',
    //     teamId: '13201',
    //     teamName: 'RB Leipzig',
    //     country: 'Portugal',
    //     goalsCount: 2,
    //     homeGoals: 2,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '134493',
    //     playerName: 'Maryan Shved',
    //     teamId: '716',
    //     teamName: 'FC Shakhtar Donetsk',
    //     country: 'Ukraine',
    //     goalsCount: 2,
    //     homeGoals: 0,
    //     awayGoals: 2,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '86050',
    //     playerName: 'Mislav Orsic',
    //     teamId: '653',
    //     teamName: 'Dinamo Zagreb',
    //     country: 'Croatia',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '100443',
    //     playerName: 'Mohamed Salah Ghaly',
    //     teamId: '25',
    //     teamName: 'Liverpool',
    //     country: 'Egypt',
    //     goalsCount: 2,
    //     homeGoals: 2,
    //     awayGoals: 0,
    //     homePenalty: 1,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '146547',
    //     playerName: 'Francisco Trincao',
    //     teamId: '466',
    //     teamName: 'Sporting CP',
    //     country: 'Portugal',
    //     goalsCount: 2,
    //     homeGoals: 0,
    //     awayGoals: 2,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '138918',
    //     playerName: 'Richarlison de Andrade',
    //     teamId: '33',
    //     teamName: 'Tottenham Hotspur',
    //     country: 'Brazil',
    //     goalsCount: 2,
    //     homeGoals: 2,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '103915',
    //     playerName: 'Raphael Guerreiro',
    //     teamId: '99',
    //     teamName: 'Borussia Dortmund',
    //     country: 'Portugal',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '170717',
    //     playerName: 'Kamal Sowah',
    //     teamId: '148',
    //     teamName: 'Club Brugge',
    //     country: 'Ghana',
    //     goalsCount: 2,
    //     homeGoals: 1,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '135853',
    //     playerName: 'Andre Zambo Anguissa',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Cameroon',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '172901',
    //     playerName: 'Khvicha Kvaratskhelia',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Georgia',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '78745',
    //     playerName: 'Steven Berghuis',
    //     teamId: '253',
    //     teamName: 'AFC Ajax',
    //     country: 'Netherlands',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '145064',
    //     playerName: 'Marcus Edwards',
    //     teamId: '466',
    //     teamName: 'Sporting CP',
    //     country: 'England',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '80902',
    //     playerName: 'Neymar da Silva Santos Junior',
    //     teamId: '271',
    //     teamName: 'Paris Saint Germain (PSG)',
    //     country: 'Brazil',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '145273',
    //     playerName: 'Tanguy Ndombele Alvaro',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '161804',
    //     playerName: 'Ferran Torres',
    //     teamId: '84',
    //     teamName: 'FC Barcelona',
    //     country: 'Spain',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '105028',
    //     playerName: 'Joao Paulo Dias Fernandes',
    //     teamId: '466',
    //     teamName: 'Sporting CP',
    //     country: 'Portugal',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 3,
    //   },
    //   {
    //     playerId: '145330',
    //     playerName: 'Amine Harit',
    //     teamId: '211',
    //     teamName: 'Marseille',
    //     country: 'Morocco',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '154969',
    //     playerName: 'Andreas Skov Olsen',
    //     teamId: '148',
    //     teamName: 'Club Brugge',
    //     country: 'Denmark',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '101117',
    //     playerName: 'Riyad Mahrez',
    //     teamId: '26',
    //     teamName: 'Manchester City',
    //     country: 'Algeria',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 1,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '30565',
    //     playerName: 'Marco Reus',
    //     teamId: '99',
    //     teamName: 'Borussia Dortmund',
    //     country: 'Germany',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '161244',
    //     playerName: 'Rodrygo Silva De Goes',
    //     teamId: '82',
    //     teamName: 'Real Madrid',
    //     country: 'Brazil',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '119097',
    //     playerName: 'Julian Brandt',
    //     teamId: '99',
    //     teamName: 'Borussia Dortmund',
    //     country: 'Germany',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '64796',
    //     playerName: 'Pierre-Emerick Aubameyang',
    //     teamId: '24',
    //     teamName: 'Chelsea',
    //     country: 'Gabon',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '27125',
    //     playerName: 'Edin Dzeko',
    //     teamId: '152',
    //     teamName: 'Inter Milan',
    //     country: 'Bosnia-Herzegovina',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '84385',
    //     playerName: 'Raheem Sterling',
    //     teamId: '24',
    //     teamName: 'Chelsea',
    //     country: 'England',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '99201',
    //     playerName: 'Sadio Mane',
    //     teamId: '88',
    //     teamName: 'Bayern Munchen',
    //     country: 'Senegal',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '175093',
    //     playerName: 'Mohamed Simakan',
    //     teamId: '13201',
    //     teamName: 'RB Leipzig',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '29326',
    //     playerName: 'Tjaronn Chery',
    //     teamId: '607',
    //     teamName: 'Maccabi Haifa',
    //     country: 'Suriname',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '116575',
    //     playerName: 'Alex Grimaldo',
    //     teamId: '463',
    //     teamName: 'Benfica',
    //     country: 'Spain',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '123617',
    //     playerName: 'Reece James',
    //     teamId: '24',
    //     teamName: 'Chelsea',
    //     country: 'England',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '153911',
    //     playerName: 'Santiago Federico Valverde Dipetta',
    //     teamId: '82',
    //     teamName: 'Real Madrid',
    //     country: 'Uruguay',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '153177',
    //     playerName: 'Arthur Gomes',
    //     teamId: '466',
    //     teamName: 'Sporting CP',
    //     country: 'Brazil',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 1,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '212835',
    //     playerName: 'Antonio Eromonsele Nordby Nusa',
    //     teamId: '148',
    //     teamName: 'Club Brugge',
    //     country: 'Norway',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '27008',
    //     playerName: 'Eric Maxim Choupo-Moting',
    //     teamId: '88',
    //     teamName: 'Bayern Munchen',
    //     country: 'Cameroon',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 1,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '119973',
    //     playerName: 'Marco Asensio Willemsen',
    //     teamId: '82',
    //     teamName: 'Real Madrid',
    //     country: 'Spain',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 3,
    //   },
    //   {
    //     playerId: '172275',
    //     playerName: 'Lassina Traore',
    //     teamId: '716',
    //     teamName: 'FC Shakhtar Donetsk',
    //     country: 'Burkina Faso',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 3,
    //   },
    //   {
    //     playerId: '28879',
    //     playerName: 'Eden Hazard',
    //     teamId: '82',
    //     teamName: 'Real Madrid',
    //     country: 'Belgium',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 1,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '167577',
    //     playerName: 'Karim Adeyemi',
    //     teamId: '99',
    //     teamName: 'Borussia Dortmund',
    //     country: 'Germany',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '179232',
    //     playerName: 'Tommaso Pobega',
    //     teamId: '150',
    //     teamName: 'AC Milan',
    //     country: 'Italy',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 3,
    //   },
    //   {
    //     playerId: '139185',
    //     playerName: 'Dean David',
    //     teamId: '607',
    //     teamName: 'Maccabi Haifa',
    //     country: 'Israel',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '82034',
    //     playerName: 'John Stones',
    //     teamId: '26',
    //     teamName: 'Manchester City',
    //     country: 'England',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 1,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '117539',
    //     playerName: 'Franck Kessie',
    //     teamId: '84',
    //     teamName: 'FC Barcelona',
    //     country: 'Cote D Ivoire',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '150245',
    //     playerName: 'Phil Foden',
    //     teamId: '26',
    //     teamName: 'Manchester City',
    //     country: 'England',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '136177',
    //     playerName: 'Mario Hermoso Canseco',
    //     teamId: '109',
    //     teamName: 'Atletico Madrid',
    //     country: 'Spain',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '106101',
    //     playerName: 'Serge Gnabry',
    //     teamId: '88',
    //     teamName: 'Bayern Munchen',
    //     country: 'Germany',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '175647',
    //     playerName: 'Wesley Fofana',
    //     teamId: '24',
    //     teamName: 'Chelsea',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '116026',
    //     playerName: 'Matteo Politano',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Italy',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 1,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '116358',
    //     playerName: 'Chancel Mbemba Mangulu',
    //     teamId: '211',
    //     teamName: 'Marseille',
    //     country: 'Democratic Rep Congo',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '96170',
    //     playerName: 'Arkadiusz Milik',
    //     teamId: '166',
    //     teamName: 'Juventus',
    //     country: 'Poland',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '170580',
    //     playerName: 'Julian Alvarez',
    //     teamId: '26',
    //     teamName: 'Manchester City',
    //     country: 'Argentina',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '78416',
    //     playerName: 'Antoine Griezmann',
    //     teamId: '109',
    //     teamName: 'Atletico Madrid',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 2,
    //   },
    //   {
    //     playerId: '142995',
    //     playerName: 'Nuno Santos',
    //     teamId: '466',
    //     teamName: 'Sporting CP',
    //     country: 'Portugal',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '28696',
    //     playerName: 'Alexis Alejandro Sanchez',
    //     teamId: '211',
    //     teamName: 'Marseille',
    //     country: 'Chile',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '124263',
    //     playerName: 'Jan Sykora',
    //     teamId: '2534',
    //     teamName: 'FC Viktoria Plzen',
    //     country: 'Czech',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '25358',
    //     playerName: 'Luka Modric',
    //     teamId: '82',
    //     teamName: 'Real Madrid',
    //     country: 'Croatia',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '146749',
    //     playerName: 'Youssef En-Nesyri',
    //     teamId: '86',
    //     teamName: 'Sevilla',
    //     country: 'Morocco',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '117850',
    //     playerName: 'Lucas Hernandez',
    //     teamId: '88',
    //     teamName: 'Bayern Munchen',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '134285',
    //     playerName: 'Denzel Dumfries',
    //     teamId: '152',
    //     teamName: 'Inter Milan',
    //     country: 'Netherlands',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '150612',
    //     playerName: 'Wenderson Galeno',
    //     teamId: '468',
    //     teamName: 'FC Porto',
    //     country: 'Brazil',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '146446',
    //     playerName: 'Ruben Dias',
    //     teamId: '26',
    //     teamName: 'Manchester City',
    //     country: 'Portugal',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 2,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '96450',
    //     playerName: 'Hakan Calhanoglu',
    //     teamId: '152',
    //     teamName: 'Inter Milan',
    //     country: 'Turkey',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '178204',
    //     playerName: 'Zaidu Sanusi',
    //     teamId: '468',
    //     teamName: 'FC Porto',
    //     country: 'Nigeria',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '66461',
    //     playerName: 'Olivier Giroud',
    //     teamId: '150',
    //     teamName: 'AC Milan',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 1,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '133867',
    //     playerName: 'Oleksandr Zubkov',
    //     teamId: '716',
    //     teamName: 'FC Shakhtar Donetsk',
    //     country: 'Ukraine',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '168332',
    //     playerName: 'Leonardo Balerdi',
    //     teamId: '211',
    //     teamName: 'Marseille',
    //     country: 'Argentina',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '60856',
    //     playerName: 'Joel Matip',
    //     teamId: '25',
    //     teamName: 'Liverpool',
    //     country: 'Cameroon',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '153421',
    //     playerName: 'Weston Mckennie',
    //     teamId: '166',
    //     teamName: 'Juventus',
    //     country: 'USA',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 1,
    //   },
    //   {
    //     playerId: '109253',
    //     playerName: 'Robert Andrich',
    //     teamId: '165',
    //     teamName: 'Bayer Leverkusen',
    //     country: 'Germany',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '147622',
    //     playerName: 'David Neres Campos',
    //     teamId: '463',
    //     teamName: 'Benfica',
    //     country: 'Brazil',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '168304',
    //     playerName: 'Jesper Lindstrom',
    //     teamId: '423',
    //     teamName: 'Eintracht Frankfurt',
    //     country: 'Denmark',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '225688',
    //     playerName: 'Abakar Sylla',
    //     teamId: '148',
    //     teamName: 'Club Brugge',
    //     country: '',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '143279',
    //     playerName: 'Dusan Vlahovic',
    //     teamId: '166',
    //     teamName: 'Juventus',
    //     country: 'Serbia',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '95598',
    //     playerName: 'Joao Mario',
    //     teamId: '463',
    //     teamName: 'Benfica',
    //     country: 'Portugal',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 1,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '115258',
    //     playerName: 'Rafael Ferreira Silva',
    //     teamId: '463',
    //     teamName: 'Benfica',
    //     country: 'Portugal',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '154647',
    //     playerName: 'Joao Pedro Neves Filipe',
    //     teamId: '70',
    //     teamName: 'Celtic FC',
    //     country: 'Portugal',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '126824',
    //     playerName: 'Steven Bergwijn',
    //     teamId: '253',
    //     teamName: 'AFC Ajax',
    //     country: 'Netherlands',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '96746',
    //     playerName: 'Andres Mateus Uribe Villa',
    //     teamId: '468',
    //     teamName: 'FC Porto',
    //     country: 'Colombia',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 1,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '161537',
    //     playerName: 'Giovanni Di Lorenzo',
    //     teamId: '1419',
    //     teamName: 'Napoli',
    //     country: 'Italy',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '151072',
    //     playerName: 'Edson Omar Alvarez Velazquez',
    //     teamId: '253',
    //     teamName: 'AFC Ajax',
    //     country: 'Mexico',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '162774',
    //     playerName: 'Moussa Diaby',
    //     teamId: '165',
    //     teamName: 'Bayer Leverkusen',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '134153',
    //     playerName: 'Christopher Nkunku',
    //     teamId: '13201',
    //     teamName: 'RB Leipzig',
    //     country: 'France',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '145108',
    //     playerName: 'Trent Arnold',
    //     teamId: '25',
    //     teamName: 'Liverpool',
    //     country: 'England',
    //     goalsCount: 1,
    //     homeGoals: 1,
    //     awayGoals: 0,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    //   {
    //     playerId: '159607',
    //     playerName: 'Luis Fernando Diaz Marulanda',
    //     teamId: '25',
    //     teamName: 'Liverpool',
    //     country: 'Colombia',
    //     goalsCount: 1,
    //     homeGoals: 0,
    //     awayGoals: 1,
    //     homePenalty: 0,
    //     awayPenalty: 0,
    //     matchNum: 3,
    //     subNum: 0,
    //   },
    // ]; // eliminar

    //hacer pruebas con jugadores

    const users = await this.userModel.find();

    for (const user of users) {
      const quinielas = await this.quinielaModel.find({
        userId: user._id,
      });

      await this.userModel.findByIdAndUpdate(user._id.toString(), {
        $set: {
          points: 0,
        },
      });

      for (let index = 0; index < quinielas.length; index++) {
        const promiseArray = quinielas[index].prediction.map((predictionId) => {
          return this.predictionModel.findById(predictionId);
        });

        const arrayPredictions = await Promise.all(promiseArray).then(
          (res) => res,
        );

        for (const match of matches) {
          if (match.status === 0) continue;

          for (const matchPrediction of arrayPredictions) {
            if (match.matchId === matchPrediction.matchId) {
              if (match.matchTime <= 1670007600) {
                // console.log('actualizando puntos fase de grupos');

                if (
                  Number(matchPrediction.results.homeScore) ===
                    match.homeScore &&
                  Number(matchPrediction.results.awayScore) === match.awayScore
                ) {
                  //darle 6 puntos por acertar el marcador y resultado
                  // console.log('6 por marcador Y resultado');

                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 6,
                      },
                    },
                  );
                } else if (
                  match.homeScore > match.awayScore &&
                  Number(matchPrediction.results.homeScore) >
                    Number(matchPrediction.results.awayScore)
                ) {
                  // darle 3 puntos por acertar el resultado

                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 3,
                      },
                    },
                  );
                } else if (
                  match.homeScore < match.awayScore &&
                  Number(matchPrediction.results.homeScore) <
                    Number(matchPrediction.results.awayScore)
                ) {
                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 3,
                      },
                    },
                  );
                }
              } else {
                // console.log('actualizando puntos resto de fases');

                if (
                  Number(matchPrediction.results.homeScore) ===
                    match.homeScore &&
                  Number(matchPrediction.results.awayScore) ===
                    match.awayScore &&
                  match.awayScore === match.homeScore
                ) {
                  //darle 3 puntos por acertar el marcador

                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 3,
                      },
                    },
                  );
                } else if (
                  Number(matchPrediction.results.homeScore) ===
                    match.homeScore &&
                  Number(matchPrediction.results.awayScore) === match.awayScore
                ) {
                  //darle 6 puntos por acertar el marcador y resultado

                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 6,
                      },
                    },
                  );
                } else if (
                  match.homeScore > match.awayScore &&
                  Number(matchPrediction.results.homeScore) >
                    Number(matchPrediction.results.awayScore)
                ) {
                  // darle 3 puntos por acertar el resultado

                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 3,
                      },
                    },
                  );
                } else if (
                  match.homeScore < match.awayScore &&
                  Number(matchPrediction.results.homeScore) <
                    Number(matchPrediction.results.awayScore)
                ) {
                  await this.userModel.findByIdAndUpdate(
                    matchPrediction.userId,
                    {
                      $inc: {
                        points: 3,
                      },
                    },
                  );
                }
              }
            }
          }
        }
      }
    }
    const playersPredictions = await this.playerModel.find();

    if (playersPredictions?.length === 0) return;

    const dateUtc = moment.utc();
    const timeNow = moment.tz(dateUtc, 'America/Caracas').unix();

    if (timeNow < 1671382800) return; //validacion para que solo se ejecute cuando haya terminado la fase final

    await this.httpService.axiosRef
      .get(
        'http://api.isportsapi.com/sport/football/topscorer?api_key=nqt7nbnv0VyRFjJf&leagueId=13014',
      )
      .then((res) => (players = res.data.data)); //cambiar leagueId a 1572

    for (const playerPrediction of playersPredictions) {
      if (playerPrediction.playerName === players[0].playerName) {
        //darle 10 puntos por acertar jugador

        await this.userModel.findByIdAndUpdate(
          playerPrediction.userId.toString(),
          {
            $inc: {
              points: 10,
            },
          },
        );
        if (Number(playerPrediction.goals) === Number(players[0].goalsCount)) {
          //darle 15 puntos por acertar el numero de goles del jugador
          await this.userModel.findByIdAndUpdate(
            playerPrediction.userId.toString(),
            {
              $inc: {
                points: 15,
              },
            },
          );
        }
      }
    }
  }

  async findAll() {
    const res = await this.httpService.axiosRef
      .get(
        'http://api.isportsapi.com/sport/football/schedule?api_key=nqt7nbnv0VyRFjJf&leagueId=1572',
      )
      .then((res) => res.data);

    return res;
  }

  findOne(id: string) {
    return this.predictionModel.findById(id);
  }

  async getAllByUserId(id: string) {
    const predictionsByUser = await this.predictionModel.find({ userId: id });
    return predictionsByUser;
  }

  async update(id: string, updatePredictionDto: UpdatePredictionDto) {
    const prediction = await this.predictionModel.findById(id);

    return `This action updates a #${prediction} prediction  for ${updatePredictionDto}`;
  }
}
